<ion-header padding>
  <ion-navbar>
    <ion-title>{{index !== null ? "Modifier un engagement" : "Créér un nouvel engagement"}}</ion-title>
  </ion-navbar>
</ion-header>

<ion-content padding>
  <form [formGroup]="form" (ngSubmit)="save()">
    <ion-item>
      <ion-label>Nom</ion-label>
      <ion-input type="text" formControlName="name"></ion-input>
    </ion-item>
    <ion-item>
      <ion-label>Phrase d'accroche</ion-label>
      <ion-textarea type="text" formControlName="short_description"></ion-textarea>
    </ion-item>
    <div class="custom-item">
      <ion-label>Contenu du popup<br /><span class="help">(cliquez sur la zone pour <br />activer l'éditeur)</span></ion-label>
      <div class="editable" tinymce [form]="form" bindTo="description" ></div>
      <input type="hidden" formControlName="description" />
    </div>
    <div class="image-container logo">
      <ion-label>Logo</ion-label>
      <div class="image logo" [style.background]="images.logo"></div>
      <button ion-button (click)="processImageFile($event, 'logo')">Choisir le logo</button>
      <input type="hidden" formControlName="logo" />
    </div>
    <div class="image-container">
      <ion-label>Image</ion-label>
      <div class="image" [style.background]="images.image"></div>
      <button ion-button (click)="processImageFile($event, 'image')">Choisir l'image</button>
      <input type="hidden" formControlName="image" />
    </div>
    <ion-item>
      <ion-label>Demander combien de personnes composent le foyer</ion-label>
      <ion-toggle [checked]="true" formControlName="ask_for_persons"></ion-toggle>
    </ion-item>
    <ion-item>
      <ion-label>Demander le nombre de fois par semaines</ion-label>
      <ion-toggle [checked]="true" formControlName="ask_for_periodicity"></ion-toggle>
    </ion-item>
    <ion-item>
      <ion-label>Texte de remplacement</ion-label>
      <ion-textarea type="text" formControlName="alternative_text"></ion-textarea>
    </ion-item>
    <ion-item>
      <ion-label>Nombre de m² sauvés par unité</ion-label>
      <ion-textarea type="text" formControlName="m2_saved_by_unit"></ion-textarea>
    </ion-item>
    <ion-item>
      <ion-label>Nombre d'euros économisés par unité</ion-label>
      <ion-textarea type="text" formControlName="euros_saved_by_unit"></ion-textarea>
    </ion-item>
    <ion-item>
      <ion-label>Ordre d'affichage</ion-label>
      <ion-textarea type="numeric" formControlName="order"></ion-textarea>
    </ion-item>
    <ion-item>
      <ion-label>Actif</ion-label>
      <ion-toggle formControlName="active"></ion-toggle>
    </ion-item>
    <div class="button-container">
      <button [hidden]="index === null" ion-button color="danger" (click)="showRemoveConfirm($event)">Supprimer</button>
      <button ion-button type="submit" value="Valider" [disabled]="!form.valid">{{index !== null ?  "Modifier l'engagement" : "Créer l'engagement"}}</button>
    </div>
  </form>
</ion-content>
